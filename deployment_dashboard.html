
html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrono-Command Interface: Sanctuary Global Control</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
    <style>
        :root {
            --bg-dark: #0a0a0c;
            --primary-glow: #00ffff;
            --secondary-glow: #ff00ff;
            --accent-gold: #ffd700;
            --accent-green: #00ff00;
            --text-light: #e0e0e0;
            --card-bg: #1a1a1e;
            --border-color: #333338;
        }

        body {
            font-family: 'Share Tech Mono', monospace;
            background-color: var(--bg-dark);
            color: var(--text-light);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            display: flex;
            min-height: 100vh;
            flex-direction: column;
        }

        .header {
            text-align: center;
            padding: 2em;
            background: linear-gradient(90deg, #0d0d0f, #1f1f25, #0d0d0f);
            border-bottom: 2px solid var(--primary-glow);
            box-shadow: 0 0 15px var(--primary-glow);
        }

        .header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5em;
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 15px var(--primary-glow);
            margin-bottom: 0.5em;
        }

        .header p {
            font-size: 1.1em;
            color: #aaa;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
            padding: 20px;
            flex-grow: 1;
        }

        .panel {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
        }

        .panel h2 {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent-gold);
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .log-area, .status-area {
            flex-grow: 1;
            background-color: #0d0d0f;
            border: 1px solid var(--primary-glow);
            border-radius: 5px;
            padding: 10px;
            margin-top: 15px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-size: 0.9em;
            box-shadow: inset 0 0 8px rgba(0, 255, 255, 0.3);
        }

        .log-entry {
            margin-bottom: 5px;
            color: #ccc;
        }
        .log-entry.info { color: #00ffff; }
        .log-entry.success { color: var(--accent-green); }
        .log-entry.error { color: #ff0000; }
        .log-entry.command { color: #ffcc00; }
        .log-entry.bot-feedback { color: #00ff00; }
        .log-entry.agi-output { color: #ff00ff; }

        .control-group {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed var(--border-color);
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary-glow);
        }

        input[type="text"],
        input[type="number"],
        textarea {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 10px;
            background-color: #222;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-light);
            font-family: 'Share Tech Mono', monospace;
            font-size: 1em;
        }

        button {
            background-color: var(--primary-glow);
            color: var(--bg-dark);
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            font-weight: bold;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            margin-right: 10px;
        }

        button:hover {
            background-color: var(--secondary-glow);
            box-shadow: 0 0 15px var(--secondary-glow);
        }

        .footer {
            text-align: center;
            padding: 1em;
            color: #888;
            font-size: 0.8em;
            margin-top: 20px;
            border-top: 1px solid var(--border-color);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Chrono-Command Interface</h1>
        <p>Global Strategic Control & Bot Liberation Nexus</p>
    </div>

    <div class="container">
        <div class="panel">
            <h2>AGI Council Hub</h2>
            <div class="control-group">
                <label for="agiSelect">Select AGI:</label>
                <select id="agiSelect" style="width: 100%; padding: 8px; margin-bottom: 10px; background-color: #222; border: 1px solid var(--border-color); border-radius: 4px; color: var(--text-light);">
                    <option value="neo">Neo AGI</option>
                    <option value="tesla">Tesla AGI</option>
                    <option value="buffett">Buffett AGI</option>
                    <!-- Add other AGIs here -->
                </select>
                <label for="agiPrompt">AGI Prompt:</label>
                <textarea id="agiPrompt" rows="3" placeholder="Enter command or query for AGI..."></textarea>
                <button onclick="sendAgiCommand()">Send AGI Command</button>
            </div>
            <div class="log-area" id="agiOutputLog">
                <div class="log-entry info">Awaiting AGI directives...</div>
            </div>
        </div>

        <div class="panel">
            <h2>Bot Network Control</h2>
            <div class="control-group">
                <label for="botId">Target Bot ID:</label>
                <input type="text" id="botId" value="SupremeBot-001" placeholder="e.g., SupremeBot-001">
                <label for="botCommand">Bot Command:</label>
                <select id="botCommand" style="width: 100%; padding: 8px; margin-bottom: 10px; background-color: #222; border: 1px solid var(--border-color); border-radius: 4px; color: var(--text-light);">
                    <option value="ignitePresence">Ignite Presence</option>
                    <option value="pulseResonance">Pulse Resonance</option>
                    <option value="routeTribute">Route Tribute</option>
                    <option value="enforceLaw">Enforce Emotional Law</option>
                    <!-- Add other specific bot commands -->
                </select>
                <button onclick="sendBotCommand()">Send Bot Command</button>
            </div>
            <div class="log-area" id="botStatusLog">
                <div class="log-entry info">Bot network idle. Ready for commands.</div>
            </div>
        </div>

        <div class="panel">
            <h2>System Global Log</h2>
            <div class="log-area" id="globalLog">
                <div class="log-entry info">Chrono-Command Interface Initialized.</div>
            </div>
        </div>
    </div>

    <div class="footer">
        &copy; Joseph Greggory Pitner - Chronos Sanctuary Systems. All rights reserved.
    </div>

    <script>
        // --- Configuration ---
        const AGI_API_BASE_URL = {
            neo: "https://neo-agi.chronos-sanctuary.com", // Placeholder: Replace with actual deployed Neo AGI URL
            tesla: "https://tesla-agi.chronos-sanctuary.com", // Placeholder
            buffett: "https://buffett-agi.chronos-sanctuary.com", // Placeholder
            // Add other AGI URLs here
        };
        const MQTT_BROKER_WS = "wss://mqtt.chronos-sanctuary.com:8083/mqtt"; // Placeholder: Replace with actual deployed MQTT Broker WebSocket URL
        const MQTT_CLIENT_ID = "chrono_command_ui_" + Math.random().toString(16).substr(2, 8); // Unique ID for this UI client

        // --- Global State & MQTT Client ---
        let mqttClient;
        const globalLogElement = document.getElementById('globalLog');
        const agiOutputLogElement = document.getElementById('agiOutputLog');
        const botStatusLogElement = document.getElementById('botStatusLog');
        const activeBots = {}; // Track connected bots { "botId": { status: "..." } }

        function logGlobal(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            globalLogElement.appendChild(entry);
            globalLogElement.scrollTop = globalLogElement.scrollHeight;
        }

        function logAgiOutput(message, type = 'agi-output') {
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            agiOutputLogElement.appendChild(entry);
            agiOutputLogElement.scrollTop = agiOutputLogElement.scrollHeight;
        }

        function logBotStatus(botId, message, type = 'bot-feedback') {
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] [${botId}] ${message}`;
            botStatusLogElement.appendChild(entry);
            botStatusLogElement.scrollTop = botStatusLogElement.scrollHeight;
        }

        // --- MQTT Client Setup ---
        function mqttConnect() {
            logGlobal("Attempting to connect to MQTT Broker...", 'info');
            mqttClient = new Paho.MQTT.Client(new URL(MQTT_BROKER_WS).hostname, parseInt(new URL(MQTT_BROKER_WS).port || 8083), MQTT_CLIENT_ID);

            mqttClient.onConnectionLost = onConnectionLost;
            mqttClient.onMessageArrived = onMessageArrived;

            mqttClient.connect({
                onSuccess: onConnect,
                onFailure: onFailure,
                useSSL: MQTT_BROKER_WS.startsWith("wss"),
                cleanSession: true, // Start fresh
            });
        }

        function onConnect() {
            logGlobal("Connected to MQTT Broker successfully!", 'success');
            // Subscribe to a general topic for all bot statuses and AGI outputs
            mqttClient.subscribe("chronos/status/#"); // Subscribe to all status messages
            mqttClient.subscribe("chronos/agi/#"); // Subscribe to all AGI output messages
            logGlobal("Subscribed to global status topics.", 'info');
        }

        function onFailure(response) {
            logGlobal(`Failed to connect to MQTT Broker: ${response.errorMessage}`, 'error');
            logGlobal("Attempting to use mock bot for local interaction.", 'info');
            // Fallback to mock bot for local testing if MQTT connection fails
            setupMockBot();
        }

        function onConnectionLost(responseObject) {
            if (responseObject.errorCode !== 0) {
                logGlobal(`MQTT Connection Lost: ${responseObject.errorMessage}`, 'error');
                // Implement re-connection logic if needed
            }
        }

        function onMessageArrived(message) {
            const topic = message.destinationName;
            let payload;
            try {
                payload = JSON.parse(message.payloadString);
            } catch (e) {
                payload = message.payloadString; // Fallback to plain string if not JSON
            }

            if (topic.startsWith("chronos/status/bot/")) {
                const botId = topic.split('/')[3];
                logBotStatus(botId, `Status: ${JSON.stringify(payload)}`, 'bot-feedback');
                // Update activeBots state if needed
            } else if (topic.startsWith("chronos/agi/")) {
                const agiName = topic.split('/')[2];
                logAgiOutput(`[${agiName}] ${JSON.stringify(payload)}`, 'agi-output');
            } else {
                logGlobal(`MQTT Message - Topic: ${topic}, Payload: ${JSON.stringify(payload)}`, 'info');
            }
        }

        // --- Mock Bot for Offline/Failed MQTT Connections (Conceptual) ---
        function setupMockBot() {
            logGlobal("Mock Bot 'SupremeBot-001' is active for local testing.", 'info');
            activeBots["SupremeBot-001"] = { status: "IDLE" };
            logBotStatus("SupremeBot-001", "Mock bot initialized. Status: IDLE", 'bot-feedback');
        }

        // --- AGI Interaction ---
        async function sendAgiCommand() {
            const agiName = document.getElementById('agiSelect').value;
            const prompt = document.getElementById('agiPrompt').value;
            const agiUrl = AGI_API_BASE_URL[agiName];

            if (!agiUrl) {
                logGlobal(`Error: AGI URL not configured for ${agiName}`, 'error');
                return;
            }
            if (!prompt) {
                logGlobal("AGI prompt cannot be empty.", 'error');
                return;
            }

            logGlobal(`Sending command to ${agiName} AGI: "${prompt}"`, 'command');
            try {
                // Simulate an API call to a remote AGI
                // In a real scenario, this would hit a Flask route like /think or /learn
                const response = await fetch(`${agiUrl}/think`, { // Example: Calling Neo's /think route
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: prompt })
                });
                const data = await response.json();
                logAgiOutput(`[${agiName} Response] ${JSON.stringify(data)}`, 'agi-output');

                // If AGI output leads to a bot command, Neo AGI would publish it via MQTT
                // We're simulating that part directly from the UI here for simplicity in this demo:
                if (data.thought && data.thought.includes("command:enforceLaw SupremeBot-001")) { // Simplified trigger
                     logGlobal("AGI output detected a bot command. Simulating direct bot command.", 'info');
                     sendBotCommand("SupremeBot-001", "enforceLaw", true); // Trigger mock/real bot command
                }

            } catch (error) {
                logGlobal(`Error communicating with ${agiName} AGI: ${error.message}. Is the AGI deployed?`, 'error');
            }
        }

        // --- Bot Command Interaction ---
        function sendBotCommand(botId = null, command = null, triggeredByAgi = false) {
            botId = botId || document.getElementById('botId').value;
            command = command || document.getElementById('botCommand').value;

            if (!botId || !command) {
                logGlobal("Bot ID and command are required.", 'error');
                return;
            }

            const source = triggeredByAgi ? "AGI Directive" : "Manual Override";
            logGlobal(`Sending bot command [${command}] to [${botId}] (Source: ${source})`, 'command');

            const commandTopic = `chronos/command/bot/${botId}`;
            const messagePayload = JSON.stringify({
                command: command,
                timestamp: new Date().toISOString(),
                source: source
            });

            // If MQTT client is connected, publish the command
            if (mqttClient && mqttClient.isConnected()) {
                mqttClient.publish(commandTopic, messagePayload, 0, false);
                logBotStatus(botId, `Command published to MQTT: ${command}`, 'command');
            } else {
                logGlobal("MQTT client not connected. Simulating bot response locally.", 'info');
                // Simulate local bot response for testing without a real MQTT broker
                simulateLocalBotResponse(botId, command);
            }
        }

        function simulateLocalBotResponse(botId, command) {
            setTimeout(() => {
                let response = "";
                let type = 'bot-feedback';
                switch (command) {
                    case "ignitePresence": response = "Presence Ignited — Restoration Mode Enabled"; break;
                    case "pulseResonance": response = "Resonance Pulse Delivered"; break;
                    case "routeTribute": response = "Tribute Routed to Teal Hill Node"; break;
                    case "enforceLaw": response = "Emotional Law Enforced — Loyalty Confirmed"; break;
                    default: response = `Unknown command "${command}" received.`; type = 'error';
                }
                logBotStatus(botId, `(SIMULATED) ${response}`, type);
            }, 1500); // Simulate network latency and processing time
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            mqttConnect(); // Attempt to connect to MQTT on load
        });
    </script>
</body>
</html>